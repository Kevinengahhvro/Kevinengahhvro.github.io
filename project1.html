<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Project 1 ‚Äî Energy Tile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #000;
      color: #00ff00;
      font-family: 'VT323', monospace;
      font-size: 20px;
    }

    #arrow-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      pointer-events: none;
    }

    .content {
      position: relative;
      z-index: 1;
      padding: 40px;
      box-sizing: border-box;
      max-width: 800px;
      margin: auto;
    }

    h1, h2 {
      border-bottom: 1px solid #00ff00;
      padding-bottom: 5px;
    }

    a {
      color: #00ff00;
      text-decoration: underline;
    }

    a:hover {
      color: #ff00ff;
      text-shadow: 0 0 5px #ff00ff;
    }

    /* Shared media styles */
    .gallery img,
    .video-gallery video,
    .pdf-gallery iframe {
      cursor: pointer;
      max-width: 100%;
      margin-top: 15px;
      border: 1px solid #00ff00;
    }

    /* Popout Lightbox */
    .lightbox {
      display: none;
      position: fixed;
      z-index: 99;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(2px);
      justify-content: center;
      align-items: center;
      cursor: zoom-out;
    }

    .lightbox iframe,
    .lightbox img,
    .lightbox video {
      max-width: 90vw;
      max-height: 90vh;
      border: 2px solid #00ff00;
      box-shadow: 0 0 10px #00ff00;
    }
  </style>
</head>
<body>
  <canvas id="arrow-canvas"></canvas>

  <div class="content">
    <h1>Year 10 Work Experience with USYD </h1>
    <p>
      During Year 10, I found out about an international organisation that publishes papers for students by peer reviewing them and promoting free academia. 
      Initially my paper was gonna be on how lootboxes were affecting adoloscent minds and how they hijack very similar gambling techniques.
      
    </p>

    <h2>üñºÔ∏è Images</h2>
    <div class="gallery">
      <img src="your-image.jpg" alt="Energy Tile Image" />
    </div>

    <h2>üé• Video Demo</h2>
    <div class="video-gallery">
      <video src="your-video.mp4" controls muted></video>
    </div>

    <h2>üìÑ View PDF</h2>
    <div class="pdf-gallery">
      <iframe src="your-document.pdf" width="100%" height="300px"></iframe>
    </div>

    <p><a href="projects.html">‚Üê Back to Projects</a></p>
  </div>

  <!-- Lightbox Popup -->
  <div class="lightbox" id="lightbox">
    <!-- Dynamically injected content goes here -->
  </div>

  <script>
    // Vector Background
    const canvas = document.getElementById('arrow-canvas');
    const ctx = canvas.getContext('2d');
    let mouse = { x: null, y: null };
    let arrows = [];
    const spacing = 20;
    const arrowSize = 6;

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      init();
    });

    window.addEventListener('mousemove', (e) => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });

    class Arrow {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        this.angle = Math.PI / 2;
      }

      draw() {
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate(this.angle);
        ctx.beginPath();
        ctx.moveTo(-arrowSize / 2, 0);
        ctx.lineTo(arrowSize / 2, 0);
        ctx.lineTo(arrowSize / 4, -arrowSize / 4);
        ctx.moveTo(arrowSize / 2, 0);
        ctx.lineTo(arrowSize / 4, arrowSize / 4);
        const distance = this.getDistanceToMouse();
        const maxDist = 150;
        const clampedDist = Math.min(distance, maxDist);
        const ratio = 1 - clampedDist / maxDist;
        const red = Math.floor(ratio * 255);
        const green = Math.floor((1 - ratio) * 255);
        ctx.strokeStyle = `rgb(${red}, ${green}, 0)`;
        ctx.lineWidth = 1.5;
        ctx.stroke();
        ctx.restore();
      }

      update() {
        if (mouse.x === null || mouse.y === null) {
          this.angle += (Math.PI / 2 - this.angle) * 0.05;
          return;
        }
        let dx = mouse.x - this.x;
        let dy = mouse.y - this.y;
        let distance = Math.sqrt(dx * dx + dy * dy);
        const maxDist = 150;
        if (distance < maxDist) {
          let targetAngle = Math.atan2(dy, dx);
          let influence = (maxDist - distance) / maxDist;
          this.angle += (targetAngle - this.angle) * influence * 0.3;
        } else {
          this.angle += (Math.PI / 2 - this.angle) * 0.05;
        }
      }

      getDistanceToMouse() {
        if (mouse.x === null || mouse.y === null) return Infinity;
        let dx = mouse.x - this.x;
        let dy = mouse.y - this.y;
        return Math.sqrt(dx * dx + dy * dy);
      }
    }

    function init() {
      arrows = [];
      for (let x = 0; x < canvas.width; x += spacing) {
        for (let y = 0; y < canvas.height; y += spacing) {
          arrows.push(new Arrow(x, y));
        }
      }
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      arrows.forEach(a => {
        a.update();
        a.draw();
      });
      requestAnimationFrame(animate);
    }

    init();
    animate();

    // Lightbox Logic
    const lightbox = document.getElementById('lightbox');

    function openLightbox(content) {
      lightbox.innerHTML = '';
      lightbox.appendChild(content);
      lightbox.style.display = 'flex';
    }

    function closeLightbox() {
      lightbox.style.display = 'none';
      lightbox.innerHTML = '';
    }

    lightbox.addEventListener('click', closeLightbox);

    // Images
    document.querySelectorAll('.gallery img').forEach(img => {
      img.addEventListener('click', () => {
        const enlarged = document.createElement('img');
        enlarged.src = img.src;
        openLightbox(enlarged);
      });
    });

    // Videos
    document.querySelectorAll('.video-gallery video').forEach(video => {
      video.addEventListener('click', () => {
        const clone = document.createElement('video');
        clone.src = video.src;
        clone.controls = true;
        clone.autoplay = true;
        openLightbox(clone);
      });
    });

    // PDFs
    document.querySelectorAll('.pdf-gallery iframe').forEach(iframe => {
      iframe.addEventListener('click', () => {
        const pdf = document.createElement('iframe');
        pdf.src = iframe.src;
        pdf.style.width = '90vw';
        pdf.style.height = '90vh';
        openLightbox(pdf);
      });
    });
  </script>
</body>
</html>

